<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Debug Test</h1>
    <div id="debug"></div>
    <table>
        <thead>
            <tr id="tableHeader"></tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <script>
        $(document).ready(function() {
            console.log('Debug test starting...');
            
            // Test 1: Check if elements exist
            console.log('tableHeader found:', $('#tableHeader').length);
            console.log('tableBody found:', $('#tableBody').length);
            
            // Test 2: Try to fetch data
            fetch('/api/data?limit=2')
                .then(response => {
                    console.log('API response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('API data received:', data);
                    $('#debug').html(`<p>Success! Got ${data.total} companies</p>`);
                    
                    // Test 3: Try to populate table
                    if (data.data && data.data.length > 0) {
                        const company = data.data[0];
                        $('#tableBody').html(`
                            <tr>
                                <td>${company['Company Name'] || 'N/A'}</td>
                                <td>${company.Country || 'N/A'}</td>
                            </tr>
                        `);
                    }
                })
                .catch(error => {
                    console.error('API error:', error);
                    $('#debug').html(`<p>Error: ${error}</p>`);
                });
        });
    </script>
</body>
</html>